<!DOCTYPE>
<html>
  <head>
		<meta charset="utf-8">
		<title>Henry's Dill Pickles</title>
		<link rel="stylesheet" href="main.css">
	</head>

	<body>
		<div class="body">
			<section>
				<a href="index.html"><img src="Logo2.png" class="logopic"></a>
				<h1 class="head">Henry's Dill Pickles</h1>
				<div class="links">
					<ul>
						<li id="l"><a href="index.html" style="color: white;">HOME</a></li>
						<li id="l"><a href="order.html" style="color: white;">ORDER</a></li>
						<li id="l" style="color: white;">STICKERS</li>
						<li id="l"><a href="reviews.html" style="color: white;">REVIEWS</a></li>
					</ul>
				</div>
        			<center id="stickerpage">
          				<h1>Stickers For Sale!</h1>
          				<p>$1 each</p>
          				<div class="stickerinputs">
            					<label for="name" class="name">Full Name:</label><br>
						<input type="text" id="name" name="name"><br><br>

						<label for="email" class="email">Your Email:</label><br>
						<input type="email" id="email" name="email"><br><br>

						<label for="address" class="address">Your Address:</label><br><br>
						<ul class="addylist">
							<li class="olist">
								<div class="dress1">
									<label for="address">Street Address:</label><br>
									<input type="text" id="address" name="address"><br>
								</div>
							</li>
							<li class="olist">
								<div class="dress2">
									<label for="city">City:</label><br>
									<input type="text" id="city" name="city"><br>
								</div>
							</li>
							<li class="olist">
								<div class="dress3">
									<label for="state">State:</label><br>
									<input type="text" id="state" name="state"><br><br>
								</div><br>
							</li>
						</ul>
          				</div>
					<p style="text-decoration:underline;">How would you like to receive them?</p>
					<div>
						<select id="mail">
							<option value="mail">By Mail</option>
							<option value="pickup">Pickup</option>
						</select>
					</div>
					<p class="optional">*by mail is extra 50&cent;</p><br>
					<center>
						<p class="optional">Payment collected upon pickup or delivery OR Venmo @BETHANY-MOORE-0</p><br>
					</center>
					<br>
					<p style="text-decoration:underline;">How many stickers would you like?</p>
					<div>
						<img src="Logo2.png" class="stickerpic"><br>
						<p class="stickernumber" id="stickernumber"></p>
						<button id="subtract">-</button>
						<button id="add">+</button>
					</div><br><br>
					<svg height="20" width="100%">
						<line x1="4%" y1="0" x2="96%" y2="0" style="stroke:rgb(0,0,0);stroke-width:5" />
					</svg><br><br>
					<button class="orderstickers" id="insertdata">ORDER STICKERS!</button>
        			</center>
			</section><br><br>
		</div>
		<script type="module">
				var numb = Number(document.getElementById("stickernumber"));
				numb = 1;
				$("#add").click(function() {
					if(numb <= 99) {
						numb = Number(numb)+1;
						$("#stickernumber").text(numb);
					}
				});
				$("#stickernumber").text(numb);
				
				$("#subtract").click(function() {
					if(numb >= 2) {
						numb = Number(numb)-1;
						$("#stickernumber").text(numb);
					}
				});
				$("#stickernumber").text(numb);



			
				// Import the functions you need from the SDKs you need
				import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
				// TODO: Add SDKs for Firebase products that you want to use
				// https://firebase.google.com/docs/web/setup#available-libraries
			
				// Your web app's Firebase configuration
				const firebaseConfig = {
				apiKey: "AIzaSyDEd3p345bo8RKRsLjbQo1AKbNG-BLwN9g",
				authDomain: "henry-s-pickle-orders.firebaseapp.com",
				databaseURL: "https://henry-s-pickle-orders-default-rtdb.firebaseio.com",
				projectId: "henry-s-pickle-orders",
				storageBucket: "henry-s-pickle-orders.appspot.com",
				messagingSenderId: "296129910902",
				appId: "1:296129910902:web:9b405c070cd67e78242757"
				};
			
				// Initialize Firebase
				const app = initializeApp(firebaseConfig);
				
				import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js";
			        const db = getDatabase();
			            
			        
			        const insBtn = document.getElementById("insertdata");
			            
			        document.querySelector("#insertdata").addEventListener("click", ()=>{
				        const name = document.getElementById("name").value;
					const email = document.getElementById("email").value;
					const address = document.getElementById("address").value;
					const city = document.getElementById("city").value;
					const state = document.getElementById("state").value;
					const stickers = numb;
					const zmail = document.getElementById("mail").value;

					if(name == "") { 
						alert("Please enter your name");
					} else if(email == "") {
						alert("Please enter an email");
					} else if(address == "") {
						alert("Please enter an address");
					} else if(city == "") {
						alert("Please enter a city");
					} else if(state == "") {
						alert("Please enter a state");
					} else {
				                
			                set(ref(db, "StickerCustomers/" + name), {
				        	name: name,
				                email: email,
						address: address,
						city: city,
						state: state,
						stickers: stickers,
						zmail: zmail
				        })
				        .then(()=>{
						$("#stickerpage").html("<center><h1>Thank you for your order!</h1><br><p>Henry will get them to you as soon as he can.</p></center>");
				        })
				        .catch((error)=>{
				        	alert("Unsuccessful, error " + error);
				        });

					}
			        });
				
			</script>
		<script src="https://code.jquery.com/jquery-2.1.4.js"></script>
		<script src="script.js"></script>
	</body>

</html>
